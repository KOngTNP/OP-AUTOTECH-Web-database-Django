{% extends 'layout.html' %}

{% block content %}
{% load static %}
{% if user.is_authenticated%}
<body>
  <h2 align="center"> All Drawing </h2>
  <a href="{url 'export-csv' %}" class="btn btn-secondary">Exportttttt</a>
  <form class="form-inline my-2 my-lg-0" action="{% url 'mysite:allDrawing' %}" style="float: right;">
    <input class="form-control mr-sm-2" type="search"   placeholder="Search" aria-label="Search" name="search">
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
  </form>
  <table class="table" id="tblStocks" cellpadding="0" cellspacing="0">
    <thead class="table-striped table-dark" >
      <tr>
        <th scope="col">Job name</th>
        <th scope="col">Drawing No</th>
        <th scope="col">Drawing Description</th>
        <th scope="col">Quantity</th>
        <th scope="col">Publish date</th>
        <th scope="col">Create by</th>

        <th scope="col">document drawing_id</th>
        <th scope="col">document Quan</th>
        <th scope="col">document user</th>
      </tr>
    </thead>
    {% for drawing in drawing %}
    
    <tr align="center" >
        <th scope="row"><a href="{% url 'mysite:drawingTable' job_id=drawing.job %}">{{drawing.job}}</a></th>
        <th scope="row"><a href="/workflow/{{drawing.drawingNo}}">{{drawing.drawingNo}}</a></th>
        <td>{{drawing.drawingDesc}}</td>
        <td>{{drawing.Quantity}}</td>
        <td>{{drawing.datePublish}}</td>
        <td>{{drawing.user}}</td>
        
        {% for document in document %}
        {% if drawing.drawingNo == document.drawing_id %}
        <td>{{document.drawing_id}}</td>
        <td>{{document.Quantity}}</td>
        <td>{{document.user}}</td>
        {% else %}
        <td>-</td>
        <td>-</td>
        <td>-</td>
        {% endif %}
        {% endfor %}



        
    </tr>
    {% endfor %}
    


  </table>
  <br />
  <button onclick="exportData()">
      <span class="glyphicon glyphicon-download"></span>
      Download list</button>
</body>
</html>


<h2 align="center"> All Drawing </h2>

<form class="form-inline my-2 my-lg-0" action="{% url 'mysite:allDrawing' %}" style="float: right;">
  <input class="form-control mr-sm-2" type="search"   placeholder="Search" aria-label="Search" name="search">
  <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
</form>

<table class="table"  id="tblStocks" >
    <thead class="table-striped table-dark" >
      <tr class="d-flex">
        <th scope="col">Job name</th>
        <th scope="col">Drawing No</th>
        <th scope="col">Drawing Description</th>
        <th scope="col">Quantity</th>
        <th scope="col">Publish date</th>
        <th scope="col">Create by</th>

        <th scope="col">document drawing_id</th>
        <th scope="col">document Quan</th>
        <th scope="col">document user</th>
      </tr>
    </thead>
    <tbody>
    
    {% for drawing in drawing %}
    
    <tr align="center" class="d-flex">
        <th scope="row"><a href="{% url 'mysite:drawingTable' job_id=drawing.job %}">{{drawing.job}}</a></th>
        <th scope="row"><a href="/workflow/{{drawing.drawingNo}}">{{drawing.drawingNo}}</a></th>
        <td>{{drawing.drawingDesc}}</td>
        <td>{{drawing.Quantity}}</td>
        <td>{{drawing.datePublish}}</td>
        <td>{{drawing.user}}</td>
        
        {% for document in document %}
        {% if drawing.drawingNo == document.drawing_id %}
        <td>{{document.drawing_id}}</td>
        <td>{{document.Quantity}}</td>
        <td>{{document.user}}</td>

        {% endif %}
        {% endfor %}



        
    </tr>
    {% endfor %}
    
    </tbody>
  </table>


{% else %}
    <h1 align="center"><a href="/login" >You need to login first</a></h1>
{% endif %}
{% endblock %}






















this is to query all the data but it have some PB, it's not show all data that it not have doc

SELECT "job_id" , "projectName", "drawingNo" , "Quantity", "mysite_drawing"."datePublish" as "a"
FROM mysite_drawing, mysite_job
WHERE "jobNo" = "job_id";




this is try to show null in this query
SELECT "job_id" , "projectName", "drawingNo" , "mysite_drawing"."Quantity", "mysite_drawing"."datePublish", "mysite_document"."Quantity" as "Quantity_doc"
FROM mysite_drawing, mysite_job, mysite_document
WHERE "jobNo" = "job_id" and "mysite_document"."Quantity" IS NOT NULL;


SELECT "job_id" , "projectName", "drawingNo" , "mysite_drawing"."Quantity", "mysite_drawing"."datePublish", "mysite_document"."Quantity" as "Quantity_doc"
FROM mysite_job, mysite_drawing join mysite_document on "drawingNo" = "drawing_id"
where "jobNo" = "job_id"











          SSID BSSID             RSSI CHANNEL          HT    CC   SECURITY (auth/unicast/group)
        OPAUTOTECH_5G    14:4d:67:ad:12:f8 -73  36      Y    US    WPA2(PSK/AES/AES) 
           vivo 1819 3e:32:29:db:73:7a -82  10          Y    --    WPA2(PSK/AES/AES) 
        OPAUTOTECH_2.4G 14:4d:67:ad:12:fc -65  6,-1     Y    --    WPA2(PSK/AES/AES) 


export BSSID=14:4d:67:ad:12:f8

export BSSID=da:5f:01:6d:d9:6d


export BSSID=14:4d:67:ad:12:fc
Hardware Port: Wi-Fi
Device: en0
Ethernet Address: dc:a9:04:87:6f:7b

Hardware Port: Bluetooth PAN
Device: en3
Ethernet Address: 88:e9:fe:71:4d:b9

Hardware Port: Thunderbolt 1
Device: en1
Ethernet Address: 82:c3:ca:6a:48:01

Hardware Port: Thunderbolt 2
Device: en2
Ethernet Address: 82:c3:ca:6a:48:00

Hardware Port: Thunderbolt Bridge
Device: bridge0
Ethernet Address: 82:c3:ca:6a:48:01










SELECT "job_id" as "Job_number", "projectName" as "Project_name", "drawingNo" as "Drawing_number", "mysite_drawing"."Quantity" as "Drawing_QTY", "mysite_drawing"."datePublish" as "Drawing_date",
"mysite_document"."Quantity" as "Document_QTY", "mysite_document"."user_id" as "Document_user", "mysite_document"."datePublish" as "Document_date",
"mysite_maker"."name" as "Maker_name",

"mysite_cutting"."Quantity" as "Cutting_QTY", "mysite_cutting"."user_id" as "Cutting_user", "mysite_cutting"."datePublish" as "Cutting_date",
"mysite_machine"."Quantity" as "Machine_QTY", "mysite_machine"."user_id" as "Machine_user", "mysite_machine"."machineNum" as "Machine_number", "mysite_machine"."datePublish" as "Machine_date",
"mysite_qc"."Quantity" as "Qc_QTY", "mysite_qc"."user_id" as "Qc_user", "mysite_qc"."datePublish" as "Qc_date",

"mysite_painting"."name" as "Painting_name", "mysite_painting"."Quantity" as "Painting_QTY", "mysite_painting"."user_id" as "Painting_user", "mysite_painting"."datePublish" as "Painting_starting_date", "mysite_painting"."dateEnd" as "Painting_End_date",
"mysite_qcpainting"."Quantity" as "Qc_Painting_QTY", "mysite_qcpainting"."user_id" as "Qc_Painting_user", "mysite_qcpainting"."datePublish" as "Qc_Painting_date",
"mysite_assemby"."Quantity" as "Assemby_QTY", "mysite_assemby"."user_id" as "Assemby_user", "mysite_assemby"."datePublish" as "Assemby_date"

FROM mysite_job, mysite_drawing 
LEFT JOIN mysite_document on  "drawingNo" = "mysite_document"."drawing_id" 
LEFT JOIN mysite_maker on  "drawingNo" ="mysite_maker"."drawing_id"
LEFT JOIN mysite_cutting on  "drawingNo" ="mysite_cutting"."drawing_id"
LEFT JOIN mysite_machine on  "drawingNo" ="mysite_machine"."drawing_id"
LEFT JOIN mysite_qc on  "drawingNo" ="mysite_qc"."drawing_id"
LEFT JOIN mysite_painting on  "drawingNo" ="mysite_painting"."drawing_id"
LEFT JOIN mysite_qcpainting on  "drawingNo" ="mysite_qcpainting"."drawing_id"
LEFT JOIN mysite_assemby on  "drawingNo" ="mysite_assemby"."drawing_id"
WHERE "jobNo" = "job_id"





















<!-- {% extends 'layout.html' %}

{% block content %}

{% if user.is_authenticated%}
<h2 align="center"> Drawing of </h2>
<body>
<div style="overflow-x: auto;">
<button onclick="exportTableToExcel('tblData')">Export Table Data To Excel File</button>


<table class="table" id="table" border="1" >
    <thead class="table-striped table-dark" >
      <tr>

        <th scope="col">Job number</th>
        <th scope="col">Project name</th>
        <th scope="col">Drawing number</th>
        <th scope="col">Drawing QTY</th>
        <th scope="col">Drawing date</th>

        <th scope="col">Document QTY</th>
        <th scope="col">Document user</th>
        <th scope="col">Document date</th>

        <th scope="col">Maker name</th>

        <th scope="col">Cutting QTY</th>
        <th scope="col">Cutting user</th>
        <th scope="col">Cutting date</th>

        <th scope="col">Machine QTY</th>
        <th scope="col">Machine user</th>
        <th scope="col">Machine number</th>
        <th scope="col">Machine date</th>

        <th scope="col">QC QTY</th>
        <th scope="col">QC user</th>
        <th scope="col">QC date</th>

        <th scope="col">Painting name</th>
        <th scope="col">Painting QTY</th>
        <th scope="col">Painting user</th>
        <th scope="col">Painting start date</th>
        <th scope="col">Painting end date</th>

        <th scope="col">QC Painting QTY</th>
        <th scope="col">QC Painting user</th>
        <th scope="col">Qc Painting date</th>
        
        <th scope="col">Assemby QTY</th>
        <th scope="col">Assemby user</th>
        <th scope="col">Assemby date</th>

      </tr>
    </thead>
    <tbody>
    {% for first_person in first_person %}

    <tr align="center">

        <th>{{first_person.Job_number}}</th>
        <td>{{first_person.Project_name}}</td>
        <th >{{first_person.drawingNo}}</th>
        <td>{{first_person.Drawing_QTY}}</td>
        <td>{{first_person.Drawing_date}}</td>
    

        <td>{{first_person.Document_QTY}}</td>
        <td>{{first_person.Document_user}}</td>
        <td>{{first_person.Document_date}}</td>

        <td>{{first_person.Maker_name}}</td>
        
        <td>{{first_person.Cutting_QTY}}</td>
        <td>{{first_person.Cutting_user}}</td>
        <td>{{first_person.Cutting_date}}</td>

        <th>{{first_person.Machine_QTY}}</th>
        <td>{{first_person.Machine_user}}</td>
        <td>{{first_person.Machine_number}}</td>
        <td>{{first_person.Machine_date}}</td>


        <td>{{first_person.Qc_QTY}}</td>
        <td>{{first_person.Qc_user}}</td>
        <td>{{first_person.Qc_date}}</td>

        <td>{{first_person.Painting_name}}</td>
        <td>{{first_person.Painting_QTY}}</td>
        <td>{{first_person.Painting_user}}</td>
        <td>{{first_person.Painting_starting_date}}</td>
        <td>{{first_person.Painting_End_date}}</td>


        <td>{{first_person.Qc_Painting_QTY}}</td>
        <td>{{first_person.Qc_Painting_user}}</td>
        <td>{{first_person.Qc_Painting_date}}</td>

        <td>{{first_person.Assemby_QTY}}</td>
        <td>{{first_person.Assemby_user}}</td>
        <td>{{first_person.Assemby_date}}</td>

        
        

    </tr>
    {% endfor %} 
    </tbody>
  </table>
</div>
</body>
</html>

{% else %}
  <h1 align="center"><a href="/login" >You need to login first</a></h1>
{% endif %}
{% endblock %} -->
